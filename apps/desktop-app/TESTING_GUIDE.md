# Angela AI Desktop App - 快速测试指南

## 🚀 快速开始

### 1. 安装依赖

```bash
# 切换到桌面应用目录
cd D:\Projects\Unified-AI-Project\apps\desktop-app\electron_app

# 安装依赖
npm install
```

### 2. 启动应用

```bash
# 开发模式（带 DevTools）
npm run dev

# 正常模式
npm start
```

### 3. 验证基本功能

#### 3.1 启动验证
- [x] 应用成功启动
- [ ] 加载遮罩显示初始化进度
- [ ] 托盘图标出现在系统托盘
- [ ] 加载完成后状态栏显示 "Angela AI is ready!"

#### 3.2 托盘功能测试
- [ ] 右键点击托盘图标，菜单显示
- [ ] 点击 "Show Angela"，窗口显示并聚焦
- [ ] 点击 "Hide Angela"，窗口隐藏
- [ ] 点击 "Settings"，设置窗口打开
- [ ] 点击 "Auto-startup"，状态切换（勾选/取消勾选）
- [ ] 双击托盘图标，窗口显示/隐藏

#### 3.3 基本交互测试
- [ ] 点击 Angela 的头部，看到惊讶表情
- [ ] 点击 Angela 的脸，看到开心表情
- [ ] 拖拽 Angela，看到她跟随移动
- [ ] 释放鼠标，Angela 恢复到原位

#### 3.4 语音指令测试
- [ ] 按住麦克风说 "hello"，看到 Angela 打招呼
- [ ] 说 "sad"，看到悲伤表情
- [ ] 说 "happy"，看到开心表情
- [ ] 说 "theme dark"，切换到暗色主题
- [ ] 说 "language zh"，切换到中文

---

## 📋 系统托盘功能测试

### 托盘右键菜单

```
┌──────────────────┐
│ Show Angela      │ - 显示 Angela 窗口并聚焦
│ Hide Angela      │ - 隐藏 Angela 窗口
│ ───────────────────┤
│ Settings         │ - 打开设置窗口
│ Reload Model     │ - 重新加载 Live2D 模型
│ Auto-startup     │ - 切换自动启动（勾选/取消）
│ ───────────────────┤
│ Toggle Always     │ - 切换置顶状态
│ Toggle Frame     │ - 切换边框状态
│ ───────────────────┤
│ About            │ - 显示关于对话框
│ Check for Updates│ - 检查更新
│ ───────────────────┤
│ Restart          │ - 重启应用
│ Quit             │ - 退出应用
└──────────────────┘
```

### 菜单功能说明

| 菜单项 | 功能 | 快捷键 |
|--------|------|--------|
| Show Angela | 显示 Angela 窗口并聚焦到最前 | - |
| Hide Angela | 隐藏 Angela 窗口到托盘 | - |
| Settings | 打开设置窗口 | Ctrl/Cmd + Shift + S |
| Reload Model | 重新加载 Live2D 模型 | - |
| Auto-startup | 切换开机自动启动 | - |
| Toggle Always on Top | 切换窗口置顶状态 | - |
| Toggle Frame | 切换窗口边框 | - |
| About | 显示应用信息 | - |
| Check for Updates | 检查应用更新 | - |
| Restart | 重启应用 | Ctrl/Cmd + Shift + R |
| Quit | 退出应用 | Ctrl/Cmd + Shift + Q |

---

## ⚙️ 设置页面测试

### 1. 通用设置（General）
- [ ] 窗口行为设置
  - [ ] 窗口启动位置
  - [ ] 窗口大小
  - [ ] 点击穿透设置
- [ ] 应用行为设置
  - [ ] 启动时显示窗口
  - [ ] 关闭时隐藏到托盘
  - [ ] 闲置时自动隐藏

### 2. 外观设置（Appearance）
- [ ] 模型选择
  - [ ] 可以选择不同的 Live2D 模型
  - [ ] 模型预览
- [ ] 显示设置
  - [ ] 模型缩放（0.5x - 2.0x）
  - [ ] 模型透明度（0.3 - 1.0）
- [ ] 桌面设置
  - [ ] 选择桌面壁纸
  - [ ] 调整壁纸位置
  - [ ] 调整壁纸透明度

### 3. 音频设置（Audio）
- [ ] TTS 设置
  - [ ] 语音速度
  - [ ] 语音音调
  - [ ] 语音音量
- [ ] 语音识别
  - [ ] 启用/禁用语音识别
  - [ ] 选择语音识别引擎
  - [ ] 语言设置
- [ ] 系统音频（架构准备）
  - [ ] 启用/禁用系统音频捕获
  - [ ] 音量控制

### 4. 触觉设置（Haptic）
- [ ] 设备管理
  - [ ] 检测触觉设备
  - [ ] 选择默认设备
- [ ] 触觉强度
  - [ ] 全局强度调整（0.0 - 1.0）
  - [ ] 不同部位独立强度
- [ ] 触觉模式
  - [ ] 预设触觉模式选择
  - [ ] 自定义触觉模式

### 5. 高级设置（Advanced）
- [ ] 性能模式
  - [ ] 自动（根据硬件自动选择）
  - [ ] 手动（very-low / low / medium / high / ultra）
- [ ] 调试工具
  - [ ] 启用开发者工具
  - [ ] 显示 FPS 计数器
  - [ ] 显示性能指标
- [ ] 精度模式
  - [ ] 自动（根据系统资源自动选择）
  - [ ] 手动（INT / DEC1 / DEC2 / DEC3 / DEC4）

### 6. 危险区域（Danger Zone）
- [ ] 重置设置
  - [ ] 警告提示
  - [ ] 确认后重置
- [ ] 清除缓存
  - [ ] 警告提示
  - [ ] 清除本地数据
  - [ ] 清除日志

---

## 🧪 功能测试

### 1. 硬件自适应测试

#### 1.1 硬件检测
- [ ] 启动时检测到正确的 RAM 大小
- [ ] 启动时检测到正确的 CPU 核心数
- [ ] 启动时检测到 GPU 型号和 VRAM
- [ ] 硬件检测结果在控制台显示

#### 1.2 性能模式
- [ ] 低端硬件自动选择 very-low 或 low 模式
- [ ] 中端硬件自动选择 medium 模式
- [ ] 高端硬件自动选择 high 或 ultra 模式
- [ ] 可以手动覆盖自动选择

#### 1.3 动态调整
- [ ] FPS 低于目标时自动降级
- [ ] FPS 高于目标时自动升级
- [ ] 调整通知发送到后端

### 2. 4D 状态矩阵测试

#### 2.1 状态更新
- [ ] 点击更新 δ 维度（attention, engagement, bond）
- [ ] 点击更新 β 维度（curiosity, focus）
- [ ] 点击更新 γ 维度（surprise）
- [ ] 状态变化反映到 Live2D 参数

#### 2.2 维度间影响
- [ ] α 维度变化影响其他维度
- [ ] β 维度变化影响其他维度
- [ ] γ 维度变化影响其他维度
- [ ] δ 维度变化影响其他维度

### 3. 成熟度系统测试

#### 3.1 经验追踪
- [ ] 每次点击增加 5 经验
- [ ] 每次语音增加 10 经验
- [ ] 经验正确累积
- [ ] 达到下一级时触发升级

#### 3.2 等级提升
- [ ] 从 L0 升级到 L1
- [ ] 升级时通知显示在状态栏
- [ ] 升级时 Live2D 表情变化
- [ ] 升级时后端收到通知

#### 3.3 能力解锁
- [ ] L0 解锁：basic_greeting, simple_response
- [ ] L1 解锁：simple_chat, preference_learning
- [ ] L2 解锁：deeper_conversation, jokes, stories
- [ ] 更高等级解锁更多能力

### 4. 精度管理测试

#### 4.1 精度模式
- [ ] INT 模式：整数，最低精度
- [ ] DEC1 模式：1 位小数
- [ ] DEC2 模式：2 位小数
- [ ] DEC3 模式：3 位小数
- [ ] DEC4 模式：4 位小数

#### 4.2 动态调整
- [ ] 低内存时自动降级精度
- [ ] 高内存时自动升级精度
- [ ] 精度变化通知后端

---

## 📊 性能监控测试

### 1. 实时指标

#### 1.1 FPS 监控
- [ ] 实时显示当前 FPS
- [ ] FPS 平均值计算正确
- [ ] FPS 低于目标时触发调整

#### 1.2 内存监控
- [ ] 实时显示内存使用
- [ ] 显示内存使用百分比
- [ ] 显示堆内存信息

#### 1.3 网络监控
- [ ] 检测网络类型（4G/Wi-Fi 等）
- [ ] 显示网络延迟
- [ ] 显示节省数据模式

### 2. 会话统计

#### 2.1 时长统计
- [ ] 显示会话持续时间
- [ ] 格式化显示（如 "5m 30s"）
- [ ] 会话结束后保存统计

#### 2.2 交互统计
- [ ] 记录点击次数
- [ ] 记录拖拽次数
- [ ] 记录语音次数
- [ ] 记录总交互次数

---

## 🌐 国际化测试

### 1. 语言切换

#### 1.1 自动检测
- [ ] 启动时自动检测系统语言
- [ ] 切换到匹配的语言
- [ ] 如果不匹配，使用英语

#### 1.2 手动切换
- [ ] 可以从设置页面切换语言
- [ ] 可以通过语音指令切换语言
- [ ] 语言切换立即生效

#### 1.3 翻译质量
- [ ] 所有界面文本正确翻译
- [ ] 参数插值正确
- [ ] 日期/时间格式正确

---

## 🎨 主题测试

### 1. 主题切换

#### 1.1 主题列表
- [ ] Light 主题：亮色背景，深色文字
- [ ] Dark 主题：暗色背景，亮色文字
- [ ] Angela 主题：粉色背景，协调配色

#### 1.2 主题切换
- [ ] 可以从设置页面切换主题
- [ ] 切换有平滑过渡动画
- [ ] 所有组件立即应用新主题

#### 1.3 自动主题
- [ ] 检测系统主题
- [ ] 自动切换到匹配的系统主题
- [ ] 系统主题改变时自动切换

---

## 🔌 插件系统测试

### 1. 插件加载
- [ ] 插件可以从本地加载
- [ ] 插件可以启用/禁用
- [ ] 插件依赖检查正确

### 2. 钩子系统
- [ ] 钩子正确触发
- [ ] 钩子可以接收和返回数据
- [ ] 插件钩子可以注册和注销

---

## 👥 用户管理测试

### 1. 多用户支持
- [ ] 可以创建多个用户
- [ ] 可以切换当前用户
- [ ] 可以删除用户
- [ ] 用户数据持久化

### 2. 用户数据
- [ ] 统计数据正确记录
- [ ] 关系数据正确记录
- [ ] 关系等级正确计算

---

## 📦 构建测试

### 1. 开发构建
```bash
npm run dev
```
- [ ] 应用成功启动
- [ ] 开发者工具自动打开
- [ ] 可以进行调试

### 2. 生产构建
```bash
npm run build
```
- [ ] 所有平台安装包成功生成
- [ ] 安装包可以正常安装
- [ ] 安装后应用可以正常运行

---

## 🐛 问题报告

如果发现任何问题，请记录：

1. **问题描述**
2. **复现步骤**
3. **预期行为**
4. **实际行为**
5. **环境信息**
   - 操作系统
   - Electron 版本
   - Node.js 版本
   - 应用版本

---

**测试指南创建时间**：2026-02-05  
**版本**：1.0.0  
**测试覆盖率目标**：90%