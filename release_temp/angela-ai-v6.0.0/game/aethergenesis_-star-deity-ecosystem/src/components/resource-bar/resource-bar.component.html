<header class="relative flex justify-center bg-black/30 p-2 shadow-2xl border-b border-cyan-800/50 backdrop-blur-sm z-40">
  <div class="flex flex-wrap justify-center gap-x-4 md:gap-x-6 gap-y-2">
    @for (item of (resourceState() | keyvalue); track item.key) {
      <div class="text-center group relative p-1 flex items-center space-x-3 rounded-md"
           [class.flash-green]="changeStates()[item.key] === 'increment'"
           [class.flash-red]="changeStates()[item.key] === 'decrement'">
        @switch (item.key) {
            @case ('M_Si') { <span class="text-gray-400 text-2xl">‚å¨</span> }
            @case ('M_Cm') { <span class="text-blue-400 text-2xl">‚¨¢</span> }
            @case ('M_Ex') { <span class="text-purple-400 text-2xl">‚úß</span> }
            @case ('L_A') { <span class="text-yellow-400 text-2xl">‚ö°</span> }
            @case ('L_S') { <span class="text-cyan-400 text-2xl">üåê</span> }
            @case ('POP') { <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-teal-300" viewBox="0 0 20 20" fill="currentColor"><path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z" /></svg> }
            @case ('Housing') { <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-orange-300" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.706-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-1.05 5.464a1 1 0 01-1.414 0l-.707-.707a1 1 0 111.414-1.414l.707.707a1 1 0 010 1.414zM4 11a1 1 0 100-2H3a1 1 0 100 2h1zm-.95 4.05a1 1 0 00-1.414 1.414l.707.707a1 1 0 001.414-1.414l-.707-.707zM6.343 4.929a1 1 0 011.414 0l.707.707a1 1 0 01-1.414 1.414L6.343 6.343a1 1 0 010-1.414z" clip-rule="evenodd" /></svg> }
        }
        <div>
           @if(item.key === 'POP') {
              <div class="text-xl font-bold text-white leading-none" [class]="item.value.amount > resourceState().Housing.amount ? '!text-red-400' : 'text-white'">
                  {{ item.value.amount | number:'1.0-0' }}
              </div>
              <div class="text-xs leading-tight text-green-500">
                +{{ item.value.net | number:'1.0-0' }}/s
              </div>
           } @else if(item.key === 'Housing') {
               <div class="text-xl font-bold text-white leading-none">
                  {{ item.value.amount | number:'1.0-0' }}
                </div>
               <div class="text-xs leading-tight text-gray-500">
                {{ 'resourceTooltips.capacity' | translate }}
              </div>
           } @else {
               <div class="text-xl font-bold text-white leading-none">
                  {{ item.value.amount | number:'1.0-0' }}
                </div>
               <div [class]="item.value.net >= 0 ? 'text-green-500' : 'text-red-500'" class="text-xs leading-tight">
                {{ item.value.net >= 0 ? '+' : '' }}{{ item.value.net | number:'1.1-1' }}/s
              </div>
           }
        </div>

        <div class="absolute left-1/2 transform -translate-x-1/2 top-full mt-2 w-max p-2 text-xs text-white bg-gray-800 border border-cyan-500 rounded-md opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20 shadow-lg">
          <p class="font-bold text-cyan-300">{{ item.value.labelKey | translate }} ({{item.key}})</p>
          @if (item.key === 'POP') {
            <p class="text-gray-300">{{ 'resourceTooltips.POP' | translate }}</p>
            @if(item.value.amount > resourceState().Housing.amount) {
              <p class="!text-red-400 font-bold">{{ 'resourceTooltips.overpopulation' | translate }}</p>
            }
          } @else if(item.key === 'Housing') {
            <p class="text-gray-300">{{ 'resourceTooltips.Housing' | translate }}</p>
          } @else {
            <p class="text-gray-300">{{ 'resourceTooltips.netIncome' | translate }}</p>
          }
        </div>
      </div>
    }
  </div>
</header>
