# Unified AI Project - å¼€å‘ç¯å¢ƒä½¿ç”¨æŒ‡å—

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜å¦‚ä½•è®¾ç½®å’Œä½¿ç”¨ Unified AI Project çš„å¼€å‘ç¯å¢ƒï¼Œè§£å†³"æ‰§è¡Œåèƒ½æµ‹è¯•ï¼Œæµ‹è¯•åèƒ½æ‰§è¡Œï¼Œæ‰§è¡Œä¸­èƒ½æµ‹è¯•"çš„éœ€æ±‚ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚

- **Node.js** >= 18.0.0
- **Python** >= 3.8
- **pnpm** (æ¨è) æˆ– npm

### 2. ä¸€é”®è®¾ç½®

```bash
# å…‹éš†é¡¹ç›®åï¼Œè¿è¡Œä¸€é”®è®¾ç½®
pnpm setup
# æˆ–è€…
node scripts/setup.js
```

è¿™ä¸ªå‘½ä»¤ä¼šï¼š
- æ£€æŸ¥ç³»ç»Ÿä¾èµ–
- å®‰è£…æ‰€æœ‰ Node.js ä¾èµ–
- åˆ›å»º Python è™šæ‹Ÿç¯å¢ƒ
- å®‰è£… Python ä¾èµ–
- åˆ›å»ºé»˜è®¤é…ç½®æ–‡ä»¶
- è¿è¡Œå¥åº·æ£€æŸ¥

### 3. Windows ç”¨æˆ·

```cmd
# ä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬
scripts\\dev.bat install
```

## ğŸ“‹ å¯ç”¨è„šæœ¬

### Node.js è„šæœ¬ (æ¨è)

```bash
# å¼€å‘ç¯å¢ƒ
pnpm dev              # å¯åŠ¨åç«¯ + å‰ç«¯
pnpm dev:backend      # åªå¯åŠ¨åç«¯
pnpm dev:frontend     # åªå¯åŠ¨å‰ç«¯  
pnpm dev:desktop      # åªå¯åŠ¨æ¡Œé¢åº”ç”¨
pnpm dev:all          # å¯åŠ¨æ‰€æœ‰ç»„ä»¶

# æµ‹è¯•
pnpm test             # è¿è¡Œæ‰€æœ‰æµ‹è¯•
pnpm test:backend     # è¿è¡Œåç«¯æµ‹è¯•
pnpm test:frontend    # è¿è¡Œå‰ç«¯æµ‹è¯•
pnpm test:desktop     # è¿è¡Œæ¡Œé¢åº”ç”¨æµ‹è¯•
pnpm test:coverage    # è¿è¡Œæµ‹è¯•è¦†ç›–ç‡
pnpm test:watch       # æµ‹è¯•ç›‘å¬æ¨¡å¼

# å¼€å‘ + æµ‹è¯•
pnpm dev-test         # åŒæ—¶å¯åŠ¨å¼€å‘ç¯å¢ƒå’Œæµ‹è¯•ç›‘æ§

# ç«¯å£ç®¡ç†
pnpm port-info        # æ˜¾ç¤ºç«¯å£ä¿¡æ¯
pnpm port-check       # æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
pnpm port-kill-service # ç»ˆæ­¢å ç”¨ç«¯å£çš„æœåŠ¡

# å·¥å…·
pnpm setup            # é¡¹ç›®è®¾ç½®
pnpm health-check     # å¥åº·æ£€æŸ¥
pnpm clean            # æ¸…ç†ä¾èµ–
```

### Windows æ‰¹å¤„ç†è„šæœ¬

```cmd
# åŸºæœ¬ç”¨æ³•
scripts\\dev.bat [action] [option]

# ç¤ºä¾‹
scripts\\dev.bat install           # å®‰è£…ä¾èµ–
scripts\\dev.bat dev               # å¯åŠ¨å¼€å‘ç¯å¢ƒ
scripts\\dev.bat dev backend       # åªå¯åŠ¨åç«¯
scripts\\dev.bat test              # è¿è¡Œæµ‹è¯•
scripts\\dev.bat test coverage     # è¿è¡Œæµ‹è¯•è¦†ç›–ç‡
scripts\\dev.bat dev-test          # å¼€å‘ + æµ‹è¯•ç›‘æ§
scripts\\dev.bat stop              # åœæ­¢æ‰€æœ‰æœåŠ¡
```

### PowerShell è„šæœ¬ (é«˜çº§ç”¨æˆ·)

```powershell
# ä½¿ç”¨ PowerShell è„šæœ¬è·å¾—æ›´å¤šåŠŸèƒ½
.\\scripts\\dev.ps1 dev -Backend -Watch
.\\scripts\\dev.ps1 test -Coverage
.\\scripts\\dev.ps1 dev-test
```

## ğŸ”„ å¼€å‘å·¥ä½œæµ

### æ¨¡å¼ 1: ä¼ ç»Ÿå¼€å‘æ¨¡å¼

```bash
# 1. å¯åŠ¨å¼€å‘ç¯å¢ƒ
pnpm dev

# 2. åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œæµ‹è¯•
pnpm test

# 3. ä»£ç ä¿®æ”¹åé‡æ–°æµ‹è¯•
pnpm test:backend  # åªæµ‹è¯•åç«¯
```

### æ¨¡å¼ 2: ç›‘å¬æµ‹è¯•æ¨¡å¼

```bash
# å¯åŠ¨æµ‹è¯•ç›‘å¬æ¨¡å¼ - æ–‡ä»¶å˜åŒ–è‡ªåŠ¨è¿è¡Œæµ‹è¯•
pnpm test:watch
```

### æ¨¡å¼ 3: å¼€å‘ + æµ‹è¯•ä¸€ä½“åŒ– (æ¨è)

```bash
# ä¸€ä¸ªå‘½ä»¤åŒæ—¶å¯åŠ¨å¼€å‘ç¯å¢ƒå’Œæµ‹è¯•ç›‘æ§
pnpm dev-test
```

è¿™ä¸ªæ¨¡å¼ä¼šï¼š
- å¯åŠ¨åç«¯ API æœåŠ¡å™¨ (localhost:8000)
- å¯åŠ¨å‰ç«¯ä»ªè¡¨æ¿ (localhost:3000)
- å¯åŠ¨ ChromaDB æœåŠ¡å™¨ (localhost:8001)
- ç›‘å¬æ–‡ä»¶å˜åŒ–å¹¶è‡ªåŠ¨è¿è¡Œç›¸å…³æµ‹è¯•
- æä¾›å®æ—¶çš„æµ‹è¯•åé¦ˆ

### æ¨¡å¼ 4: åˆ†ç¦»å¼å¼€å‘

```bash
# ç»ˆç«¯ 1: åªå¯åŠ¨åç«¯
pnpm dev:backend

# ç»ˆç«¯ 2: åªå¯åŠ¨å‰ç«¯
pnpm dev:frontend

# ç»ˆç«¯ 3: æµ‹è¯•ç›‘æ§
node scripts/test-watcher.js
```

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### æµ‹è¯•ç±»å‹

1. **å•å…ƒæµ‹è¯•**: æµ‹è¯•å•ä¸ªå‡½æ•°/ç±»
2. **é›†æˆæµ‹è¯•**: æµ‹è¯•ç»„ä»¶é—´äº¤äº’
3. **ç«¯åˆ°ç«¯æµ‹è¯•**: æµ‹è¯•å®Œæ•´ç”¨æˆ·æµç¨‹

### æµ‹è¯•é…ç½®

#### åç«¯æµ‹è¯• (pytest)
- é…ç½®æ–‡ä»¶: `apps/backend/pytest.ini`
- æµ‹è¯•ç›®å½•: `apps/backend/tests/`
- è¦†ç›–ç‡æŠ¥å‘Š: `apps/backend/htmlcov/`

#### å‰ç«¯æµ‹è¯• (Jest)
- é…ç½®æ–‡ä»¶: `apps/frontend-dashboard/jest.config.js`
- æµ‹è¯•ç›®å½•: `apps/frontend-dashboard/__tests__/`

#### æ¡Œé¢åº”ç”¨æµ‹è¯• (Jest)
- é…ç½®æ–‡ä»¶: `apps/desktop-app/jest.config.js`
- æµ‹è¯•ç›®å½•: `apps/desktop-app/__tests__/`

### æµ‹è¯•æœ€ä½³å®è·µ

```bash
# è¿è¡Œç‰¹å®šæµ‹è¯•
cd apps/backend
source venv/bin/activate  # Linux/Mac
call venv\\Scripts\\activate.bat  # Windows
pytest tests/test_specific.py -v

# è¿è¡Œæ ‡è®°çš„æµ‹è¯•
pytest -m "not slow"  # è·³è¿‡æ…¢æµ‹è¯•
pytest -m "integration"  # åªè¿è¡Œé›†æˆæµ‹è¯•

# è°ƒè¯•æ¨¡å¼
pytest --pdb  # å¤±è´¥æ—¶è¿›å…¥è°ƒè¯•å™¨
pytest -s     # æ˜¾ç¤ºprintè¾“å‡º
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **Python è™šæ‹Ÿç¯å¢ƒé—®é¢˜**
   ```bash
   # é‡æ–°åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
   cd apps/backend
   rm -rf venv  # Linux/Mac
   rmdir /s venv  # Windows
   python -m venv venv
   # ç„¶åé‡æ–°è¿è¡Œ pnpm setup
   ```

2. **ä¾èµ–å†²çª**
   ```bash
   # æ¸…ç†å¹¶é‡æ–°å®‰è£…
   pnpm clean
   pnpm install
   pnpm setup
   ```

3. **ç«¯å£è¢«å ç”¨**
   ```bash
   # ä½¿ç”¨ç«¯å£ç®¡ç†å·¥å…·
   pnpm port-info                    # æŸ¥çœ‹æ‰€æœ‰ç«¯å£çŠ¶æ€
   pnpm port-check 8000             # æ£€æŸ¥ç‰¹å®šç«¯å£
   pnpm port-kill-service BACKEND   # ç»ˆæ­¢åç«¯æœåŠ¡
   
   # æˆ–è€…æ‰‹åŠ¨æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
   netstat -ano | findstr :8000  # Windows
   lsof -i :8000  # Linux/Mac
   
   # æˆ–è€…ä½¿ç”¨ä¸åŒç«¯å£
   uvicorn src.services.main_api_server:app --port 8001
   ```

4. **ChromaDB è¿æ¥é—®é¢˜**
   ```bash
   # æ‰‹åŠ¨å¯åŠ¨ ChromaDB
   cd apps/backend
   source venv/bin/activate
   python start_chroma_server.py
   ```

### ç«¯å£ç®¡ç†ç­–ç•¥

é¡¹ç›®é‡‡ç”¨ç»Ÿä¸€çš„ç«¯å£ç®¡ç†ç­–ç•¥æ¥é¿å…å¼€å‘è¿‡ç¨‹ä¸­çš„ç«¯å£å†²çªé—®é¢˜ï¼š

| æœåŠ¡åç§° | ç«¯å£å· | ç”¨é€”è¯´æ˜ |
|---------|-------|---------|
| FRONTEND_DASHBOARD | 3000 | å‰ç«¯ä»ªè¡¨æ¿ Web æœåŠ¡ |
| DESKTOP_APP | 3001 | æ¡Œé¢åº”ç”¨ Electron æœåŠ¡ |
| BACKEND_API | 8000 | åç«¯ API æœåŠ¡ |

é¡¹ç›®å®ç°äº†è‡ªåŠ¨åŒ–çš„ç«¯å£å†²çªæ£€æµ‹å’Œè§£å†³æœºåˆ¶ï¼Œåœ¨å¯åŠ¨æœåŠ¡ä¹‹å‰ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶ç»ˆæ­¢å·²å­˜åœ¨çš„å†²çªè¿›ç¨‹ã€‚è¯¦ç»†ä¿¡æ¯è¯·å‚é˜…ï¼š[ç«¯å£ç®¡ç†ç­–ç•¥](PORT_MANAGEMENT_STRATEGY.md)

### è°ƒè¯•æŠ€å·§

1. **ä½¿ç”¨å¥åº·æ£€æŸ¥**
   ```bash
   pnpm health-check
   python scripts/health_check.py
   ```

2. **æŸ¥çœ‹æ—¥å¿—**
   ```bash
   # åç«¯æ—¥å¿— (å¼€å‘æ¨¡å¼ä¼šè¾“å‡ºåˆ°æ§åˆ¶å°)
   # å‰ç«¯æ—¥å¿— (æµè§ˆå™¨å¼€å‘è€…å·¥å…·)
   ```

3. **æµ‹è¯•è°ƒè¯•**
   ```bash
   # åç«¯æµ‹è¯•è°ƒè¯•
   pytest --pdb -x  # ç¬¬ä¸€ä¸ªå¤±è´¥æ—¶åœæ­¢å¹¶è¿›å…¥è°ƒè¯•å™¨
   
   # å‰ç«¯æµ‹è¯•è°ƒè¯•  
   pnpm test --debug
   ```

## ğŸ“Š æ€§èƒ½ç›‘æ§

å¼€å‘ç¯å¢ƒæä¾›äº†ä»¥ä¸‹ç›‘æ§åŠŸèƒ½ï¼š

1. **API æ€§èƒ½**: åç«¯è‡ªåŠ¨è®°å½• API å“åº”æ—¶é—´
2. **æµ‹è¯•æ€§èƒ½**: æµ‹è¯•è¿è¡Œæ—¶é—´å’Œè¦†ç›–ç‡
3. **èµ„æºä½¿ç”¨**: å†…å­˜å’Œ CPU ä½¿ç”¨æƒ…å†µ
4. **çƒ­é‡è½½**: æ–‡ä»¶å˜åŒ–æ£€æµ‹å’Œè‡ªåŠ¨é‡å¯

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

å¼€å‘ç¯å¢ƒé…ç½®äº†åŸºæœ¬çš„å®‰å…¨æªæ–½ï¼š

1. **CORS**: å…è®¸æœ¬åœ°å¼€å‘ç«¯å£
2. **ç¯å¢ƒå˜é‡**: æ•æ„Ÿä¿¡æ¯ä½¿ç”¨ç¯å¢ƒå˜é‡
3. **è™šæ‹Ÿç¯å¢ƒ**: Python ä¾èµ–éš”ç¦»
4. **æµ‹è¯•éš”ç¦»**: æµ‹è¯•ä½¿ç”¨ç‹¬ç«‹çš„æ•°æ®åº“

## ğŸ“ è´¡çŒ®æŒ‡å—

1. **ä»£ç è§„èŒƒ**: éµå¾ªé¡¹ç›®çš„ä»£ç é£æ ¼
2. **æµ‹è¯•è¦†ç›–**: æ–°åŠŸèƒ½å¿…é¡»æœ‰å¯¹åº”æµ‹è¯•
3. **æ–‡æ¡£æ›´æ–°**: æ›´æ–°ç›¸å…³æ–‡æ¡£
4. **æäº¤ä¿¡æ¯**: ä½¿ç”¨æ¸…æ™°çš„æäº¤ä¿¡æ¯

## ğŸ†˜ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹è¿™ä¸ªæ–‡æ¡£
2. è¿è¡Œ `pnpm health-check`
3. æ£€æŸ¥é¡¹ç›®çš„ Issues
4. æŸ¥çœ‹è¯¦ç»†çš„é”™è¯¯æ—¥å¿—

---

**Happy Coding! ğŸ‰**