# LIS_TonalRepairEngine: Linguistic Immune System Tonal Repair

## Overview

This document provides an overview of the `TonalRepairEngine` module (`src/core_ai/lis/tonal_repair_engine.py`). This module is designed to repair and refine AI-generated text based on detected linguistic or tonal issues, serving as a component of the Linguistic Immune System (LIS).

## Purpose

The primary purpose of the `TonalRepairEngine` is to enhance the quality and appropriateness of the AI's textual output. By automatically addressing specific linguistic or tonal problems, such as repetitiveness or unintended negative sentiment, this module acts as a post-processing step to ensure that the AI's communication is more coherent, polished, and aligned with desired communication styles and user expectations.

## Key Responsibilities and Features

*   **Text Repair (`repair_output`)**:
    *   Takes two main inputs: the `original_text` generated by the AI and a `list` of `issues` that have been detected in that text.
    *   Applies specific repair strategies based on the identified issues. The current implementation includes basic, prototype-level repairs:
        *   For the "repetitive" issue: It attempts to remove duplicate words from the text while preserving the original order of the remaining words, aiming for conciseness.
        *   For the "negative_sentiment" issue: It adds an empathetic prefix to the text, transforming a potentially negative statement into one that acknowledges the sentiment before conveying the message.

## How it Works

The `TonalRepairEngine` operates as a rule-based text transformation system. It receives text that has been flagged with certain linguistic or tonal issues. It then iterates through these issues and applies predefined, hardcoded transformations to the text. The current implementation is a simplified prototype, demonstrating the conceptual approach to rule-based text repair within the LIS framework. In a more advanced system, these repair strategies could be dynamically learned or more complex.

## Integration with Other Modules

*   **LIS Semantic Anomaly Detection**: This module would typically receive the `issues` list from a semantic anomaly detection system, which is a part of the broader Linguistic Immune System (LIS). This upstream component would be responsible for identifying the specific linguistic problems that need repair.
*   **`DialogueManager`**: The `DialogueManager` or any other component responsible for generating AI responses would likely use this `TonalRepairEngine` to refine its generated text before presenting it to the user. This ensures that the final output is polished and adheres to desired communication standards.

## Code Location

`src/core_ai/lis/tonal_repair_engine.py`