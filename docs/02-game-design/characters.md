# Character System (角色系統)

## 總覽 (Overview)

角色系統是「安琪拉的世界」中所有可互動實體的管理核心。遊戲中的每個角色，無論是玩家、核心 AI 還是 NPC，都共享一些基本屬性，例如在遊戲世界中的視覺呈現 (`image`) 和位置 (`rect`)。然而，根據其在遊戲中的角色定位，他們的控制方式、行為邏輯和互動模式有著顯著的不同。

## 主要角色類別 (Main Character Classes)

### 1. 玩家 (The Player)
- **對應檔案**: `player.py`
- **類別**: `Player`
- **角色定位**: 玩家在遊戲世界中的化身，是使用者意志的直接體現。
- **控制方式**: 由使用者的即時輸入（鍵盤）直接控制。`Player.update()` 方法會檢查按鍵狀態來決定角色的移動。
- **核心屬性**:
    - `inventory`: 一個 `Inventory` 物件，用於管理玩家持有的物品。
    - `appearance`: 一個描述玩家外觀的字典，支援客製化。
    - `current_action`: 用於處理特殊動作狀態（如釣魚、採礦），以暫停移動等基本操作。

### 2. 核心 AI (The Core AI)
- **對應檔案**: `angela.py`
- **類別**: `Angela`
- **角色定位**: 遊戲的中心角色和核心 AI 實體。她是遊戲模擬與後端複雜 AI 系統之間的橋樑。
- **控制方式**: 自主驅動 (Autonomous)。她的行為由內部的 AI 邏輯決定（如 `check_for_proactive_interaction()`），而非玩家直接控制。她的狀態會根據與玩家的互動歷史和內部決策而改變。
- **核心屬性**:
    - `favorability`: 一個數值，用於追蹤玩家與 Angela 之間的關係親密度（好感度）。
    - `dialogue_manager`: 連接到後端 AI 大腦的介面，負責生成有深度和上下文的對話。
- **互動模式**: 
    - 玩家可以透過贈送禮物 (`give_gift`) 或發起對話來與 Angela 互動。
    - Angela 也可以根據其內部 AI 的判斷，主動向玩家發起互動。

### 3. 非玩家角色 (Non-Player Characters)
- **對應檔案**: `npcs.py`
- **類別**: `NPC`
- **角色定位**: 填充遊戲世界、提供任務、資訊和氛圍的輔助角色。
- **控制方式**: 被動反應 (Reactive)。目前的 NPC 在地圖上是靜態的，只在玩家主動與其 `interact()` 時才會觸發行為。
- **核心特性**:
    - **資料驅動 (Data-Driven)**: NPC 的所有屬性（名稱、位置、外觀、對話內容）都從外部的 `data/game_data/npcs.json` 檔案中載入。這種設計讓開發者可以輕鬆地新增或修改 NPC，而無需更改遊戲程式碼。
    - **簡單對話樹 (`dialogue_tree`)**: NPC 的互動邏輯基於一個從 JSON 中讀取的簡單對話樹。可以根據與玩家的關係等級 (`relationship_level`) 來展現不同的對話內容。
