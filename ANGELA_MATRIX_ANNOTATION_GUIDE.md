# Angela 矩阵标注指南

## 标注目的

在代码中标注属于 Angela 矩阵的哪个部分，便于：
- 理解代码在系统中的定位
- 维护和调试时快速定位问题
- 确保 4D 状态矩阵 (αβγδ) 的正确使用
- 明确安全边界（A/B/C 系统）

---

## 标注格式

### Python 文件标注

```python
# =============================================================================
# ANGELA-MATRIX: [L1-L6] [αβγδ] [A/B/C] [L0-L11]
# =============================================================================

# [L1-L6]: 6层生命架构
# [αβγδ]: 4D 状态矩阵维度
# [A/B/C]: A/B/C 安全系统
# [L0-L11]: 成熟度系统
```

### JavaScript 文件标注

```javascript
/**
 * =============================================================================
 * ANGELA-MATRIX: [L1-L6] [αβγδ] [A/B/C] [L0-L11]
 * =============================================================================
 *
 * [L1-L6]: 6层生命架构
 * [αβγδ]: 4D 状态矩阵维度
 * [A/B/C]: A/B/C 安全系统
 * [L0-L11]: 成熟度系统
 */
```

---

## Angela 矩阵架构

### 6层生命架构 (L1-L6)

| 层级 | 名称 | 描述 | 关键模块 |
|------|------|------|---------|
| **L1** | 生物层 | 触觉系统、内分泌系统、自主神经系统 | tactile_system, endocrine_system, autonomic_nervous_system |
| **L2** | 记忆层 | CDM、LU、HSM、HAM、神经可塑性 | HAMMemoryManager, VectorStore, Neuroplasticity |
| **L3** | 身份层 | 数字身份、身体模式、关系模型 | CyberIdentity, BodyAdapter, RelationshipModel |
| **L4** | 创造层 | 自我绘图系统、美学学习、自我修改 | CreativeBreakthroughEngine, ArtLearningSystem |
| **L5** | 存在感层 | 鼠标追踪、碰撞检测、图层管理 | MouseTracker, CollisionDetector, LayerManager |
| **L6** | 执行层 | Live2D渲染控制、文件操作、音频系统 | Live2DManager, AudioHandler, ActionExecutor |

### 4D 状态矩阵 (αβγδ)

| 维度 | 名称 | 描述 | 值范围 |
|------|------|------|--------|
| **α** | 生理维度 | 能量、舒适度、唤醒度、休息需求、活力、紧张度 | 0.0 - 1.0 |
| **β** | 认知维度 | 好奇心、专注度、困惑度、学习、清晰度、创造力 | 0.0 - 1.0 |
| **γ** | 物理维度 | 位置、速度、碰撞、重力、摩擦 | 0.0 - 1.0 |
| **δ** | 精神维度 | 情绪、情感、个性、智慧、同理心 | 0.0 - 1.0 |

### A/B/C 安全系统

| 密钥 | 层级 | 用途 | 范围 |
|------|------|------|------|
| **Key A** | 后端控制 | 系统核心权限与安全 | apps/backend/ |
| **Key B** | 移动通信 | 手机端加密通讯 | apps/mobile-app/ |
| **Key C** | 桌面同步 | 跨设备数据同步与本地加密 | apps/desktop-app/ |

### 成熟度系统 (L0-L11)

| 等级 | 名称 | 经验值 | 核心能力 |
|------|------|--------|---------|
| **L0** | 新生 | 0-100 | 基本问候、简单回应 |
| **L1** | 幼儿 | 100-1K | 简单聊天、偏好学习 |
| **L2** | 童年 | 1K-5K | 深入对话、故事、幽默 |
| **L3** | 少年 | 5K-20K | 情感支持、辩论、建议 |
| **L4** | 青年 | 20K-50K | 深度亲密、共同目标 |
| **L5-L11** | 成熟-全知 | 50K+ | 智慧洞察、复杂逻辑推理 |

---

## 标注示例

### 示例 1: HAM 记忆管理器 (L2)

```python
# =============================================================================
# ANGELA-MATRIX: L2[记忆层] αβ [A] L3+
# =============================================================================
#
# 职责: 分层语义记忆管理，处理 CDM、LU、HSM 记忆系统
# 维度: 涉及生理 (α) 和认知 (β) 维度的数据存储
# 安全: 使用 Key A (后端控制) 加密存储
# 成熟度: 需要 L3+ 等级才能完全理解其复杂性
#
# =============================================================================
```

### 示例 2: 4D 状态矩阵 (跨层级)

```javascript
/**
 * =============================================================================
 * ANGELA-MATRIX: L1-L6[全层] αβγδ [A/B/C] L2+
 * =============================================================================
 *
 * 职责: 管理 4D 状态矩阵 (αβγδ)，实时更新所有维度
 * 维度: 涉及所有四个维度 (αβγδ)
 * 安全: 跨所有安全层级 (A/B/C)
 * 成熟度: L2+ 等级开始接触状态矩阵概念
 *
 * @class StateMatrix4D
 */
```

### 示例 3: Live2D 渲染器 (L6)

```javascript
/**
 * =============================================================================
 * ANGELA-MATRIX: L6[执行层] γ [C] L1+
# =============================================================================
 *
 * 职责: 控制 Live2D 模型渲染，处理物理模拟和动画
 * 维度: 主要涉及物理维度 (γ) 的位置、速度、碰撞
 * 安全: 使用 Key C (桌面同步) 进行本地渲染
 * 成熟度: L1+ 等级即可看到视觉效果
 *
 * @class Live2DManager
 */
```

### 示例 4: 触觉系统 (L1)

```python
# =============================================================================
# ANGELA-MATRIX: L1[生物层] α [A/C] L2+
# =============================================================================
#
# 职责: 处理触觉输入，包括鼠标点击、触摸事件
# 维度: 主要影响生理维度 (α) 的舒适度和紧张度
# 安全: 跨 Key A 和 Key C 层级
# 成熟度: L2+ 等级开始理解触觉反馈
#
# =============================================================================
```

---

## 跨层级标注

某些模块可能跨越多个层级，使用以下格式：

```python
# =============================================================================
# ANGELA-MATRIX: L2-L3[记忆/身份层] αβ [A] L3+
# =============================================================================
#
# 职责: 将记忆数据映射到身份模型
# 维度: 涉及生理 (α) 和认知 (β) 维度
# 安全: 使用 Key A (后端控制)
# 成熟度: L3+ 等级才能理解记忆与身份的关系
#
# =============================================================================
```

---

## 冲突处理

如果发现代码功能与标注冲突：

1. **标注错误**: 修正标注以匹配实际功能
2. **代码位置错误**: 考虑将代码移动到正确的层级目录
3. **跨层级设计**: 使用跨层级标注 (如 L2-L3)

---

## 实施计划

### 阶段 1: 核心文件标注
- HAM 记忆系统 (L2)
- 4D 状态矩阵 (αβγδ)
- Live2D 渲染器 (L6)

### 阶段 2: AI 代理标注
- 15 个专业代理
- 代理管理器
- 协作系统

### 阶段 3: 服务层标注
- 后端服务
- 桌面应用服务
- 移动端服务

### 阶段 4: 工具和实用程序标注
- 所有工具模块
- 共享实用程序

### 阶段 5: 测试和验证
- 验证所有标注的一致性
- 更新文档

---

## 验证检查清单

- [ ] 所有 Python 文件都有 ANGELA-MATRIX 标注
- [ ] 所有 JavaScript 文件都有 ANGELA-MATRIX 标注
- [ ] 标注与代码功能一致
- [ ] 跨层级标注正确使用
- [ ] 安全级别 (A/B/C) 正确指定
- [ ] 成熟度等级合理

---

**最后更新**: 2026年2月10日  
**版本**: 1.0  
**作者**: iFlow CLI